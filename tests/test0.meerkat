service foo_service {
    var x = 1;
    var y = 2;
    def f = x + y;
    def g = x * y;
    def h = g - f;

    
    
    pub def inc_x = action { x = x + 1; };
}

@test(foo_service) {
    
    do inc_x;
    
    assert(g == 4);
    assert(f == 4);

    do inc_x;
    
    assert(f == 3);
    assert(g == 6);
}